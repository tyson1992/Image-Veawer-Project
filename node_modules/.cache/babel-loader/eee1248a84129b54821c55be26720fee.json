{"ast":null,"code":"import _defineProperty from \"C:/Users/Gajanan/Desktop/ImageViewer-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:/Users/Gajanan/Desktop/ImageViewer-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"C:/Users/Gajanan/Desktop/ImageViewer-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/Gajanan/Desktop/ImageViewer-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/Gajanan/Desktop/ImageViewer-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/Gajanan/Desktop/ImageViewer-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/Users/Gajanan/Desktop/ImageViewer-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\Gajanan\\\\Desktop\\\\ImageViewer-main\\\\src\\\\screens\\\\home\\\\Home.js\";\nimport React, { Component } from 'react';\nimport './Home.css';\nimport Header from '../../common/header/Header';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport Avatar from '@material-ui/core/Avatar';\nimport { withStyles } from '@material-ui/core/styles';\nimport FavoriteIconBorder from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIconFill from '@material-ui/icons/Favorite';\nimport Typography from '@material-ui/core/Typography';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport Button from '@material-ui/core/Button';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport { constants } from '../../common/utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar styles = function styles(theme) {\n  return {\n    card: {\n      maxWidth: 1100\n    },\n    avatar: {\n      margin: 10\n    },\n    media: {\n      height: 0,\n      paddingTop: '56.25%' // 16:9\n\n    },\n    formControl: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'baseline'\n    },\n    comment: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    hr: {\n      marginTop: '10px',\n      borderTop: '2px solid #f2f2f2'\n    },\n    gridList: {\n      width: 1100,\n      height: 'auto',\n      overflowY: 'auto'\n    },\n    grid: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      marginTop: 90\n    }\n  };\n};\n\nvar Home = /*#__PURE__*/function (_Component) {\n  _inherits(Home, _Component);\n\n  var _super = _createSuper(Home);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _super.call(this, props);\n\n    _this.onSearchEntered = function (value) {\n      console.log('search value', value);\n      var filteredData = _this.state.userInfo;\n      filteredData = filteredData.filter(function (data) {\n        var string = data.caption.toLowerCase();\n        var subString = value.toLowerCase();\n        return string.includes(subString);\n      });\n\n      _this.setState({\n        userInfo: filteredData\n      });\n    };\n\n    _this.addCommentClickHandler = function (id) {\n      if (_this.state.currentComment === \"\" || typeof _this.state.currentComment === undefined) {\n        return;\n      }\n\n      var commentList = _this.state.comments.hasOwnProperty(id) ? _this.state.comments[id].concat(_this.state.currentComment) : [].concat(_this.state.currentComment);\n\n      _this.setState({\n        comments: _objectSpread(_objectSpread({}, _this.state.comments), {}, _defineProperty({}, id, commentList)),\n        currentComment: ''\n      });\n    };\n\n    _this.commentChangeHandler = function (e) {\n      _this.setState({\n        currentComment: e.target.value\n      });\n    };\n\n    _this.getBaseUserInfo = function () {\n      var that = _assertThisInitialized(_this);\n\n      var url = \"\".concat(constants.userInfoUrl, \"=\").concat(sessionStorage.getItem('access-token'));\n      return fetch(url, {\n        method: 'GET'\n      }).then(function (response) {\n        return response.json();\n      }).then(function (jsonResponse) {\n        that.setState({\n          userInfo: jsonResponse.data\n        });\n\n        _this.state.userInfo.map(function (data, index) {\n          return _this.getMediaData(data.id);\n        });\n      }).catch(function (error) {\n        console.log('error user data', error);\n      });\n    };\n\n    _this.getMediaData = function (id) {\n      var that = _assertThisInitialized(_this);\n\n      var url = \"\".concat(constants.userMediaUrl, \"/\").concat(id, \"?fields=id,media_type,media_url,username,timestamp&access_token=&access_token=\").concat(sessionStorage.getItem('access-token'));\n      return fetch(url, {\n        method: 'GET'\n      }).then(function (response) {\n        return response.json();\n      }).then(function (jsonResponse) {\n        that.setState({\n          filteredData: _this.state.filteredData.concat(jsonResponse)\n        });\n      }).catch(function (error) {\n        console.log('error user data', error);\n      });\n    };\n\n    _this.logout = function () {\n      sessionStorage.clear();\n\n      _this.props.history.replace('/');\n    };\n\n    _this.navigateToAccount = function () {\n      _this.props.history.push('/profile');\n    };\n\n    if (sessionStorage.getItem('access-token') == null) {\n      props.history.replace('/');\n    }\n\n    _this.state = {\n      data: [],\n      filteredData: [],\n      userData: [],\n      likeSet: new Set(),\n      comments: {},\n      currrentComment: \"\",\n      userInfo: [],\n      likes: 0\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getBaseUserInfo();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Header, {\n          userProfileUrl: \"profile.png\",\n          screen: \"Home\",\n          searchHandler: this.onSearchEntered,\n          handleLogout: this.logout,\n          handleAccount: this.navigateToAccount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.grid,\n          children: /*#__PURE__*/_jsxDEV(GridList, {\n            className: classes.gridList,\n            cellHeight: 'auto',\n            children: this.state.filteredData.map(function (item, index) {\n              return /*#__PURE__*/_jsxDEV(GridListTile, {\n                children: /*#__PURE__*/_jsxDEV(HomeItem, {\n                  classes: classes,\n                  item: item,\n                  userInfo: _this2.state.userInfo,\n                  onLikedClicked: _this2.likeClickHandler,\n                  onAddCommentClicked: _this2.addCommentClickHandler,\n                  commentChangeHandler: _this2.commentChangeHandler,\n                  comments: _this2.state.comments\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 17\n                }, _this2)\n              }, item.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 15\n              }, _this2);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nvar HomeItem = /*#__PURE__*/function (_Component2) {\n  _inherits(HomeItem, _Component2);\n\n  var _super2 = _createSuper(HomeItem);\n\n  function HomeItem() {\n    var _this3;\n\n    _classCallCheck(this, HomeItem);\n\n    _this3 = _super2.call(this);\n\n    _this3.onLikeClicked = function (id) {\n      // Change Like Icon and Increment/Decrement likes counter\n      if (!_this3.state.isLiked) {\n        _this3.setState({\n          likes: _this3.state.likes + 1\n        });\n      } else {\n        _this3.setState({\n          likes: _this3.state.likes - 1\n        });\n      }\n\n      if (_this3.state.isLiked) {\n        _this3.setState({\n          isLiked: false\n        });\n      } else {\n        _this3.setState({\n          isLiked: true\n        });\n      }\n    };\n\n    _this3.commentChangeHandler = function (e) {\n      _this3.setState({\n        comment: e.target.value\n      });\n\n      _this3.props.commentChangeHandler(e);\n    };\n\n    _this3.onAddCommentClicked = function (id) {\n      // Add comment\n      if (_this3.state.comment === \"\" || typeof _this3.state.comment === undefined) {\n        return;\n      }\n\n      _this3.setState({\n        comment: \"\"\n      });\n\n      _this3.props.onAddCommentClicked(id);\n    };\n\n    _this3.state = {\n      isLiked: false,\n      comment: '',\n      likes: 3\n    };\n    return _this3;\n  }\n\n  _createClass(HomeItem, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          item = _this$props.item,\n          userInfo = _this$props.userInfo,\n          comments = _this$props.comments; // Convert Timestamp to required format\n\n      var createdTime = new Date(item.timestamp);\n      var yyyy = createdTime.getFullYear();\n      var mm = createdTime.getMonth() + 1;\n      var dd = createdTime.getDate();\n      var HH = createdTime.getHours();\n      var MM = createdTime.getMinutes();\n      var ss = createdTime.getSeconds();\n      var time = dd + \"/\" + mm + \"/\" + yyyy + \" \" + HH + \":\" + MM + \":\" + ss; // Fetching the caption of the image via the API endpoint result\n\n      var captionText = '';\n      var likeCount = this.state.likes;\n      userInfo.forEach(function (data) {\n        if (data.id === item.id) {\n          captionText = data.caption;\n        }\n      });\n\n      if (captionText === '') {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"home-item-main-container\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 14\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"home-item-main-container\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: classes.card,\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n                alt: \"User Profile Pic\",\n                src: \"profile.png\",\n                className: classes.avatar\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 21\n              }, this),\n              title: item.username,\n              subheader: time\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n                className: classes.media,\n                image: item.media_url,\n                title: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.hr,\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  component: \"p\",\n                  children: captionText\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  style: {\n                    color: '#4dabf5'\n                  },\n                  component: \"p\",\n                  children: \"#Tech #Saurabh #Nature #Earth #Peace\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n              children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                \"aria-label\": \"Add to favorites\",\n                onClick: this.onLikeClicked.bind(this, item.id),\n                children: [this.state.isLiked && /*#__PURE__*/_jsxDEV(FavoriteIconFill, {\n                  style: {\n                    color: '#F44336'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 42\n                }, this), !this.state.isLiked && /*#__PURE__*/_jsxDEV(FavoriteIconBorder, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 43\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                component: \"p\",\n                children: [likeCount, \" likes\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [comments.hasOwnProperty(item.id) && comments[item.id].map(function (comment, index) {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    component: \"p\",\n                    style: {\n                      fontWeight: 'bold'\n                    },\n                    children: [sessionStorage.getItem('username'), \":\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 280,\n                    columnNumber: 25\n                  }, _this4), /*#__PURE__*/_jsxDEV(Typography, {\n                    component: \"p\",\n                    children: comment\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 283,\n                    columnNumber: 25\n                  }, _this4)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 23\n                }, _this4);\n              }), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.formControl,\n                children: [/*#__PURE__*/_jsxDEV(FormControl, {\n                  style: {\n                    flexGrow: 1\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                    htmlFor: \"comment\",\n                    children: \"Add a comment\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 291,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Input, {\n                    id: \"comment\",\n                    value: this.state.comment,\n                    onChange: this.commentChangeHandler\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 292,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n                  class: \"commentAdd\",\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    onClick: this.onAddCommentClicked.bind(this, item.id),\n                    variant: \"contained\",\n                    color: \"primary\",\n                    children: \"ADD\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this);\n      }\n    }\n  }]);\n\n  return HomeItem;\n}(Component);\n\nexport default withStyles(styles)(Home);","map":{"version":3,"sources":["C:/Users/Gajanan/Desktop/ImageViewer-main/src/screens/home/Home.js"],"names":["React","Component","Header","Card","CardHeader","CardMedia","CardContent","CardActions","IconButton","Avatar","withStyles","FavoriteIconBorder","FavoriteIconFill","Typography","FormControl","InputLabel","Input","Button","GridList","GridListTile","constants","styles","theme","card","maxWidth","avatar","margin","media","height","paddingTop","formControl","display","flexDirection","justifyContent","alignItems","comment","hr","marginTop","borderTop","gridList","width","overflowY","grid","Home","props","onSearchEntered","value","console","log","filteredData","state","userInfo","filter","data","string","caption","toLowerCase","subString","includes","setState","addCommentClickHandler","id","currentComment","undefined","commentList","comments","hasOwnProperty","concat","commentChangeHandler","e","target","getBaseUserInfo","that","url","userInfoUrl","sessionStorage","getItem","fetch","method","then","response","json","jsonResponse","map","index","getMediaData","catch","error","userMediaUrl","logout","clear","history","replace","navigateToAccount","push","userData","likeSet","Set","currrentComment","likes","classes","item","likeClickHandler","HomeItem","onLikeClicked","isLiked","onAddCommentClicked","createdTime","Date","timestamp","yyyy","getFullYear","mm","getMonth","dd","getDate","HH","getHours","MM","getMinutes","ss","getSeconds","time","captionText","likeCount","forEach","username","media_url","color","bind","fontWeight","flexGrow"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport './Home.css';\r\nimport Header from '../../common/header/Header';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport {withStyles} from '@material-ui/core/styles';\r\nimport FavoriteIconBorder from '@material-ui/icons/FavoriteBorder';\r\nimport FavoriteIconFill from '@material-ui/icons/Favorite';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Input from '@material-ui/core/Input';\r\nimport Button from '@material-ui/core/Button';\r\nimport GridList from '@material-ui/core/GridList';\r\nimport GridListTile from '@material-ui/core/GridListTile';\r\nimport {constants} from '../../common/utils'\r\n\r\nconst styles =  theme => ({\r\n  card: {\r\n    maxWidth: 1100,\r\n  },\r\n  avatar: {\r\n    margin: 10,\r\n  },\r\n  media: {\r\n    height:0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  formControl: {\r\n    display:'flex',\r\n    flexDirection:'row',\r\n    justifyContent:'space-between',\r\n    alignItems:'baseline',\r\n  },\r\n  comment:{\r\n    display:'flex',\r\n    alignItems:'center'\r\n  },\r\n  hr:{\r\n    marginTop:'10px',\r\n    borderTop:'2px solid #f2f2f2'\r\n  },\r\n  gridList:{\r\n    width: 1100,\r\n    height: 'auto',\r\n    overflowY: 'auto',\r\n  },\r\n  grid:{\r\n    display:'flex',\r\n    justifyContent:'center',\r\n    alignItems:'center',\r\n    marginTop:90\r\n  }\r\n});\r\n\r\nclass Home extends Component{\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    if (sessionStorage.getItem('access-token') == null) {\r\n      props.history.replace('/');\r\n    }\r\n    this.state = {\r\n      data: [],\r\n      filteredData:[],\r\n      userData:[],\r\n      likeSet:new Set(),\r\n      comments:{},\r\n      currrentComment:\"\",\r\n      userInfo:[],\r\n      likes: 0\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getBaseUserInfo();\r\n  }\r\n\r\n  render(){\r\n    const{classes} = this.props;\r\n    return(\r\n      <div>\r\n        <Header\r\n          userProfileUrl=\"profile.png\"\r\n          screen={\"Home\"}\r\n          searchHandler={this.onSearchEntered}\r\n          handleLogout={this.logout}\r\n          handleAccount={this.navigateToAccount}/>\r\n        <div className={classes.grid}>\r\n          <GridList className={classes.gridList} cellHeight={'auto'}>\r\n            {this.state.filteredData.map((item, index) => (\r\n              <GridListTile key={item.id}>\r\n                <HomeItem\r\n                  classes={classes}\r\n                  item={item}\r\n                  userInfo={this.state.userInfo}\r\n                  onLikedClicked={this.likeClickHandler}\r\n                  onAddCommentClicked={this.addCommentClickHandler}\r\n                  commentChangeHandler={this.commentChangeHandler}\r\n                  comments={this.state.comments}/>\r\n              </GridListTile>\r\n            ))}\r\n          </GridList>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onSearchEntered = (value) =>{\r\n    console.log('search value', value);\r\n    let filteredData = this.state.userInfo;\r\n    filteredData = filteredData.filter((data) =>{\r\n      let string = data.caption.toLowerCase();\r\n      let subString = value.toLowerCase();\r\n      return string.includes(subString);\r\n    })\r\n    this.setState({\r\n      userInfo: filteredData\r\n    })\r\n  }\r\n\r\n  addCommentClickHandler = (id)=>{\r\n    if (this.state.currentComment === \"\" || typeof this.state.currentComment === undefined) {\r\n      return;\r\n    }\r\n\r\n    let commentList = this.state.comments.hasOwnProperty(id)?\r\n      this.state.comments[id].concat(this.state.currentComment): [].concat(this.state.currentComment);\r\n\r\n    this.setState({\r\n      comments:{\r\n        ...this.state.comments,\r\n        [id]:commentList\r\n      },\r\n      currentComment:''\r\n    })\r\n  }\r\n\r\n\r\n  commentChangeHandler = (e) => {\r\n    this.setState({\r\n      currentComment:e.target.value\r\n    });\r\n  }\r\n\r\n  getBaseUserInfo = () => {\r\n    let that = this;\r\n    let url = `${constants.userInfoUrl}=${sessionStorage.getItem('access-token')}`;\r\n    return fetch(url,{\r\n      method:'GET',\r\n    }).then((response) =>{\r\n        return response.json();\r\n    }).then((jsonResponse) =>{\r\n      that.setState({\r\n        userInfo:jsonResponse.data\r\n      });\r\n      this.state.userInfo.map((data, index) => (\r\n          this.getMediaData(data.id)\r\n      ));\r\n    }).catch((error) => {\r\n      console.log('error user data',error);\r\n    });\r\n  }\r\n\r\n  getMediaData = (id) => {\r\n    let that = this;\r\n    let url = `${constants.userMediaUrl}/${id}?fields=id,media_type,media_url,username,timestamp&access_token=&access_token=${sessionStorage.getItem('access-token')}`;\r\n    return fetch(url,{\r\n      method:'GET',\r\n    }).then((response) =>{\r\n        return response.json();\r\n    }).then((jsonResponse) =>{\r\n      that.setState({\r\n        filteredData: this.state.filteredData.concat(jsonResponse)\r\n      })\r\n    }).catch((error) => {\r\n      console.log('error user data',error);\r\n    });\r\n  }\r\n\r\n  logout = () => {\r\n    sessionStorage.clear();\r\n    this.props.history.replace('/');\r\n  }\r\n\r\n  navigateToAccount = () =>{\r\n    this.props.history.push('/profile');\r\n  }\r\n}\r\n\r\nclass HomeItem extends Component{\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      isLiked : false,\r\n      comment:'',\r\n      likes: 3\r\n    }\r\n  }\r\n\r\n  render(){\r\n    const {classes, item, userInfo, comments} = this.props;\r\n\r\n    // Convert Timestamp to required format\r\n\r\n    let createdTime = new Date(item.timestamp);\r\n    let yyyy = createdTime.getFullYear();\r\n    let mm = createdTime.getMonth() + 1;\r\n    let dd = createdTime.getDate();\r\n\r\n    let HH = createdTime.getHours();\r\n    let MM = createdTime.getMinutes();\r\n    let ss = createdTime.getSeconds();\r\n\r\n    let time = dd+\"/\"+mm+\"/\"+yyyy+\" \"+HH+\":\"+MM+\":\"+ss;\r\n\r\n    // Fetching the caption of the image via the API endpoint result\r\n    let captionText = '';\r\n    let likeCount = this.state.likes;\r\n    userInfo.forEach(data => {\r\n      if (data.id === item.id) {\r\n        captionText = data.caption;\r\n      }\r\n    });\r\n\r\n    if(captionText === '') {\r\n      return(<div className=\"home-item-main-container\"></div>);\r\n    } else {\r\n      return(\r\n          <div className=\"home-item-main-container\">\r\n            <Card className={classes.card}>\r\n              <CardHeader\r\n                  avatar={\r\n                    <Avatar alt=\"User Profile Pic\" src=\"profile.png\" className={classes.avatar}/>\r\n                  }\r\n                  title={item.username}\r\n                  subheader={time}\r\n              />\r\n\r\n              { /* Media URL value is fetched via the API endpoint and is diplayed below using item.media_url query */ }\r\n              <CardContent>\r\n                <CardMedia\r\n                    className={classes.media}\r\n                    image={item.media_url}\r\n                    title=\"\"\r\n                />\r\n                <div className={classes.hr}>\r\n                  <Typography component=\"p\">\r\n\r\n                    { /* Fetch Caption from API call */ }\r\n                    {captionText}\r\n                  </Typography>\r\n                  <Typography style={{color:'#4dabf5'}} component=\"p\" >\r\n                    { /* Hard Coded Hashtags */ }\r\n                    #Tech #Saurabh #Nature #Earth #Peace\r\n                  </Typography>\r\n                </div>\r\n              </CardContent>\r\n              <CardActions>\r\n                <IconButton aria-label=\"Add to favorites\" onClick={this.onLikeClicked.bind(this,item.id)}>\r\n                  {this.state.isLiked && <FavoriteIconFill style={{color:'#F44336'}}/>}\r\n                  {!this.state.isLiked && <FavoriteIconBorder/>}\r\n                </IconButton>\r\n                <Typography component=\"p\">\r\n\r\n                  { /*   */ }\r\n                  {likeCount} likes\r\n                </Typography>\r\n              </CardActions>\r\n\r\n              <CardContent>\r\n                {comments.hasOwnProperty(item.id) && comments[item.id].map((comment, index)=>{\r\n                  return(\r\n                      <div key={index} className=\"row\">\r\n                        <Typography component=\"p\" style={{fontWeight:'bold'}}>\r\n                          {sessionStorage.getItem('username')}:\r\n                        </Typography>\r\n                        <Typography component=\"p\" >\r\n                          {comment}\r\n                        </Typography>\r\n                      </div>\r\n                  )\r\n                })}\r\n                <div className={classes.formControl}>\r\n                  <FormControl style={{flexGrow:1}}>\r\n                    <InputLabel htmlFor=\"comment\">Add a comment</InputLabel>\r\n                    <Input id=\"comment\" value={this.state.comment} onChange={this.commentChangeHandler}/>\r\n                  </FormControl>\r\n                  <FormControl class=\"commentAdd\">\r\n                    <Button onClick={this.onAddCommentClicked.bind(this,item.id)}\r\n                            variant=\"contained\" color=\"primary\">\r\n                      ADD\r\n                    </Button>\r\n                  </FormControl>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  onLikeClicked = (id) => {\r\n    // Change Like Icon and Increment/Decrement likes counter\r\n    if (!this.state.isLiked) {\r\n      this.setState({\r\n        likes: this.state.likes + 1\r\n      })\r\n    } else {\r\n      this.setState({\r\n        likes: this.state.likes - 1\r\n      })\r\n    }\r\n    if (this.state.isLiked) {\r\n      this.setState({\r\n        isLiked:false\r\n      });\r\n    }else {\r\n      this.setState({\r\n        isLiked:true\r\n      });\r\n    }\r\n  }\r\n\r\n  commentChangeHandler = (e) => {\r\n    this.setState({\r\n      comment:e.target.value,\r\n    });\r\n    this.props.commentChangeHandler(e);\r\n  }\r\n\r\n  onAddCommentClicked = (id) => {\r\n    // Add comment\r\n    if (this.state.comment === \"\" || typeof this.state.comment === undefined) {\r\n      return;\r\n    }\r\n    this.setState({\r\n      comment:\"\"\r\n    });\r\n    this.props.onAddCommentClicked(id);\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(Home);"]},"metadata":{},"sourceType":"module"}